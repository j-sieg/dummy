require "test_helper"

class <%= class_name %>MailerTest < ActionMailer::TestCase
  test "reset_password works" do
    recipient = <%= plural_name %>(:james)
    email = <%= class_name %>Mailer.with(<%= singular_name %>: recipient, token: "dummy token").reset_password

    assert_emails 1 do
      email.deliver_now
    end

    assert_equal [recipient.email], email.to
    # FIXME: when we get an actual "from" email
    assert_equal ["from@example.com"], email.from
    assert_equal "Reset your password", email.subject
  end
end
